{
  "hash": "57e18dc531c49a76a092425c730c18b7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Longitudinal Single Level Regression\"\nformat:\n  live-html:\n    css: \n      - exams/webex.css\n    include-after-body: exams/webex.js\nwebr:\n  packages:\n    - dplyr\n    - ggplot2\n    - haven\ntoc: true    \n---\n\n\n::: {.cell}\n\n:::\n\n\n\nDie multiple Regression ist bereits ein mächtiges Werkzeug zur Modellierung längsschnittlicher Daten, wenn nicht mehr als zwei Messzeitpunkte vorliegen.\n\n## Grundidee\nWird eine Messung genau einmal wiederholt (z.B. Variablen $AV_{PRE}$, $AV_{POST}$), so kann in einem Single-Level Regressionsmodell \n\n* die Differenz $\\left(AV^{POST}_i - AV^{PRE}_i\\right)$  (siehe @sec-prädiktion-differenzen) oder \n* die Abweichung des tatsächlichen zweiten Messwertes vom erwarteten zweiten Wert (z.B. Residuum der Regression $AV^{POST}_i = b_0 + b_1 \\cdot AV^{PRE}_i + \\epsilon_i$ (siehe @sec-prädiktion-nach-adjustierung)\n\nmit weiteren unabhängigen Variablen prädiziert werden.\n\n\n## Prädiktion von Differenzwerten {#sec-prädiktion-differenzen}\n\n::: {.cell envir='env chapter single-level' exercise='data setup longitudinal single level' autorun='false'}\n```{webr}\n#| envir: env chapter single-level\n#| exercise: data setup longitudinal single level\n#| autorun: false\n#| warning:\tfalse\n\nlibrary(haven)\nlibrary(dplyr)\nlibrary(ggplot2)\ndata_star <- read_sav(\n  \"https://raw.githubusercontent.com/sammerk/WinterSchoolZH/master/data_star_workshop.sav\"\n)\n\ndata_star_subset <- data_star %>%\n  group_by(g3tchid) %>%\n  summarize(\n    `Mathe Klassenmittelwert Kl. 2` = mean(g2tmathss, na.rm = T),\n    `Mathe Klassenmittelwert Kl. 3` = mean(g3tmathss, na.rm = T),\n    `Anteil Free Lunch` = mean(ifelse(g2freelunch == 1, 1, 0), na.rm = T),\n    g3classsize = mean(g3classsize, na.rm = T)\n  ) %>%\n  ungroup() %>%\n  # Berechnung des Veränderungsscores\n  mutate(\n    `Mathe Klassenmittelwert Veränderung` = `Mathe Klassenmittelwert Kl. 3` -\n      `Mathe Klassenmittelwert Kl. 2`\n  )\n```\n:::\n\n\n\n### Grafische Darstellung\n\n::: {.cell envir='env chapter single-level' exercise='plot diff prediction' autorun='false'}\n```{webr}\n#| envir: env chapter single-level\n#| exercise: plot diff prediction\n#| autorun: false\n#| warning:\tfalse\n\nggplot(\n  data_star_subset,\n  aes(x = g3classsize, y = `Mathe Klassenmittelwert Veränderung`)\n) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(\n    title = \"Veränderung des Mathe Klassenmittelwerts nach Klassenstärke\",\n    x = \"Klassenstärke (Kl. 3)\",\n    y = \"Veränderung des Mathe Klassenmittelwerts\"\n  ) +\n  theme_minimal()\n\n```\n:::\n\n\n\n### Prädiktion der Differenz mit `g3classsize`\n\n\n::: {.cell envir='env chapter single-level' exercise='model diff prediction' autorun='false'}\n```{webr}\n#| envir: env chapter single-level\n#| exercise: model diff prediction\n#| autorun: false\n#| warning:\tfalse\n\nmod_change_linreg01 <- lm(\n  `Mathe Klassenmittelwert Veränderung` ~ + g3classsize,\n  data = data_star_subset\n)\n\nsummary(mod_change_linreg01)\n```\n:::\n\n\n## Prädiktion nach Adjustierung um Prä-Messung {#sec-prädiktion-nach-adjustierung}\n### Grafische Darstellung\n\n\n::: {.cell envir='env chapter single-level' exercise='plot adjusted prediction' autorun='false'}\n```{webr}\n#| envir: env chapter single-level\n#| exercise: plot adjusted prediction\n#| autorun: false\n#| warning:\tfalse\n\nggplot(\n  data_star_subset,\n  aes(\n    x = `Mathe Klassenmittelwert Kl. 2`,\n    y = `Mathe Klassenmittelwert Kl. 3`,\n    color = g3classsize\n  )\n) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(\n    title = \"Mathe Klassenmittelwerte Kl. 2 vs. Kl. 3\",\n    x = \"Mathe Klassenmittelwert Kl. 2\",\n    y = \"Mathe Klassenmittelwert Kl. 3\"\n  ) +\n  theme_minimal()\n```\n:::\n\n\n### Prädiktion nach Adjustierung\n\n::: {.cell envir='env chapter single-level' exercise='model adjusted prediction' autorun='false'}\n```{webr}\n#| envir: env chapter single-level\n#| exercise: model adjusted prediction\n#| autorun: false\n#| warning:\tfalse\n\nmod_change_linreg02 <- lm(\n  `Mathe Klassenmittelwert Kl. 3` ~ `Mathe Klassenmittelwert Kl. 2` + g3classsize,\n  data = data_star_subset\n)\n\nsummary(mod_change_linreg02)\n```\n:::\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}